<app-loading-spinner *ngIf="isLoading" [title]="'Provincia'"></app-loading-spinner>
<app-alert-dialog [message]="message"></app-alert-dialog>


<form class="row row-cols-1  row-cols-sm-1 row-cols-md-1  row-cols-lg-2 p-3  justify-content-center"
  [formGroup]="provinceForm" autocomplete="off">

  <div class="col  border rounded mt-0 mt-sm-2   p-4 c-caja">
    <!-- TITULO -->
    <div class="row mb-4">

      <h2 class="text-center">{{title}} <span class="fw-light">Provincia</span> </h2>
    </div>

    <!-- CODIGO_PROVINCIA -->
    <div class="mb-3">
      <label class="form-label">Codigo Provincia</label>
      <input type="text" placeholder="Ingrese codigo provincia" formControlName="codigoProvincia" class="form-control">
      <span *ngIf="isValidField('codigoProvincia')" class="form-text text-danger">
        {{getFieldOfGroupError("codigoProvincia")}}
      </span>
    </div>
    <!-- NOMBRE_PROVINCIA -->
    <div class="mb-3">
      <label class="form-label">Nombre Provincia</label>
      <input type="text" placeholder="Ingrese codigo provincia" formControlName="nombre" class="form-control">
      <span *ngIf="isValidField('nombre')" class="form-text text-danger">
        {{getFieldOfGroupError("nombre")}}
      </span>
    </div>

    <div class="row">
      <button type="submit" *ngIf="title!=='InformaciÃ³n'" (click)="onSubmit()"
        class="btn btn-primary text-center d-flex justify-content-center"> <img
          [src]="title ==='Agregar' ? 'assets/add.svg' : 'assets/edit.svg'" width="24px" height="24px"
          class="me-1">{{title}}</button>
    </div>

  </div>

  <div class="col    border mt-0 mt-sm-2  rounded p-4 c-caja" *ngIf="title !== 'Agregar'">
    <!-- TITULO -->
    <div class="row mb-4">

      <div class="col d-flex justify-content-center">
        <button class="btn btn-success   me-sm-3  "
          [routerLink]="['/cantons/register/',currentProvince.codigoProvincia]">
          <img src="assets/add.svg" alt="Icono de agregar">
        </button>
        <h2 class="text-center fw-light">

          Cantones de provincia
        </h2>
      </div>
    </div>

    <div class="row cantones">
      <div class="list-group" *ngFor="let canton of cantones">
        <a class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true"
          (click)="onSelectedCanton(canton.codigoCanton)">
          <img src="assets/canton.svg" alt="twbs" width="32" height="32" class="rounded-circle flex-shrink-0">
          <div class="d-flex gap-2 w-100 justify-content-between">
            <div>
              <h6 class="mb-0">Nombre: <span class="fw-normal ">{{canton.nombre}}</span>
              </h6>
              <p class="mb-0 opacity-75">Numeros de distritos: {{ canton.distritos.length }}</p>
            </div>
            <small class="text-nowrap">
              <!-- {{canton.codigoCanton}} -->
              <div class="btn-group   " role="group">
                <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown"
                  aria-expanded="false">
                  Acciones
                </button>
                <ul class="dropdown-menu  ">
                  <li><a class="dropdown-item btn" [routerLink]="['/districts/register/', canton.codigoCanton]">Crear
                      Distrito</a>
                  </li>
                  <li><a class="dropdown-item btn" [routerLink]="['/cantons', canton.codigoCanton]">Ver</a>
                  <li><a class="dropdown-item btn" [routerLink]="['/cantons/edit/', canton.codigoCanton]">Editar</a>
                  </li>

                  <li>
                    <button class="dropdown-item btn" (click)="onDeleteCanton(canton.codigoCanton)">Eliminar</button>
                  </li>


                </ul>
              </div>
            </small>
          </div>
        </a>


      </div>
    </div>

  </div>
</form>
<!--
#other -->
<div class="row mb-4" *ngIf="title !== 'Agregar'">

  <div class="row me-sm-0 me-lg-4 d-flex    justify-content-center " *ngIf="(distritos?.length ?? 0) !==0">
    <!--  [routerLink]="['/provinces/edit/', provincia.codigoProvincia]" -->

    <div class="col d-flex justify-content-center">

      <h2 class="text-center fw-light">

        Distritos de canton selecionado
      </h2>
    </div>


  </div>



  <h2 class="text-center fw-light" *ngIf="(distritos?.length ?? 0) ===0">Seleccione un canton para mostrar sus distritos
  </h2>



</div>


<div class="row row-cols-1 row-cols-sm-1 row-cols-md-2  row-cols-lg-3 justify-content-center">
  <div class="col mt-3 mt-sm-3 mt-md-3 mt-lg-0" *ngFor="let distrito of distritos">
    <div class="card  text-primary-emphasis bg-primary-subtle border border-primary-subtle rounded-3 mb-2">
      <div class="card-body d-flex justify-content-between ">
        <h5 class="card-title d-flex align-items-end  ">{{distrito.nombre}}</h5>
        <!-- <p class="card-text">With supporting text below as a natural lead-in to additional content.</p> -->

        <div class=" d-flex justify-content-center ">


          <!-- <a href="#" [routerLink]="['/districts', distrito.codigoDistrito]"
            class=" card-link text-primary-emphasis ">Ver</a>
          <a href="#" [routerLink]="['/districts/edit/', distrito.codigoDistrito]"
            class="  card-link text-warning-emphasis  ">Editar</a>
          <a   class="  card-link text-danger" (click)="onDelete(distrito.codigoDistrito)">Eliminar</a> -->

          <!-- <button type="button" [routerLink]="['/districts', distrito.codigoDistrito]"
            class="btn btn-primary me-1 mb-0  mb-sm-2 mb-md-2 mb-lg-0">
            <img src="assets/view.svg">
          </button>
          <button [routerLink]="['/districts/edit/', distrito.codigoDistrito]" type="button"
            class="btn  btn-secondary me-1 me-1 mb-0  mb-sm-2 mb-md-2 mb-lg-0">
            <img src="assets/edit.svg">
          </button>


          <button  type="button" class="btn btn-danger" (click)="onDelete(distrito.codigoDistrito)">

            <img src="assets/delete.svg">

          </button> -->
          <div class="btn-group btn-group-sm" role="group" aria-label="Small button group">
            <button [routerLink]="['/districts', distrito.codigoDistrito]" type="button"
              class="btn btn-outline-primary">Ver</button>
            <button [routerLink]="['/districts/edit/', distrito.codigoDistrito]" type="button"
              class="btn btn-outline-primary">Editar</button>
            <button (click)="onDeleteDistrict(distrito.codigoDistrito)" type="button"
              class="btn btn-outline-danger">Eliminar</button>
          </div>
        </div>
        <!-- (click)="onDelete(provincia.codigoProvincia)" -->

      </div>
    </div>
  </div>
</div>



<!-- <code>
    <pre>Formulario es valido: {{provinceForm.valid| json }}</pre>
</code>
<code>
    <pre>Formulario Tipo Cambio: {{provinceForm.value| json }}</pre>
</code>


<code>
    <pre>current Tipo Cambio: {{currentProvince| json }}</pre>
</code> -->
