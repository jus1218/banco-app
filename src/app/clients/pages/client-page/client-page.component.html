<app-loading-spinner *ngIf="isLoading" [title]="'Cliente'"></app-loading-spinner>
<app-alert-dialog [message]="message"></app-alert-dialog>


<form class="row row-cols-1  row-cols-sm-1 row-cols-md-1  row-cols-lg-2 p-3  justify-content-center"
  [formGroup]="clientForm" autocomplete="off">


  <div class="col  border rounded mt-0 mt-sm-2   p-4 c-caja">


    <!-- TITULO -->
    <div class="row mb-4">

      <h2 class="text-center">{{title}} <span class="fw-light">Cliente</span> </h2>
    </div>

    <!-- CODIGO_CLIENTE -->
    <div class="mb-3" *ngIf="title !== 'Agregar'">
      <label class="form-label">Codigo Cliente</label>
      <input type="text" placeholder="Ingrese codigo banco" formControlName="codigoCliente" class="form-control">
      <span *ngIf="isValidField('codigoCliente')" class="form-text text-danger">
        {{getFieldOfGroupError("codigoCliente")}}
      </span>
    </div>

    <!-- NOMBRE_BANCO -->
    <div class="mb-3">
      <label class="form-label">Nombre Cliente</label>
      <input type="text" placeholder="Ingrese el nombre" formControlName="nombre" class="form-control">
      <span *ngIf="isValidField('nombre')" class="form-text text-danger">
        {{getFieldOfGroupError("nombre")}}
      </span>
    </div>
    <!-- PRIMER_APELLIDO -->
    <div class="mb-3">
      <label class="form-label">Primer Apellido</label>
      <input type="text" placeholder="Ingrese el primer apellido" formControlName="primerApellido" class="form-control">
      <span *ngIf="isValidField('primerApellido')" class="form-text text-danger">
        {{getFieldOfGroupError("primerApellido")}}
      </span>
    </div>
    <!-- SEGUNDO_APELLIDO -->
    <div class="mb-3">
      <label class="form-label">Segundo Apellido</label>
      <input type="text" placeholder="Ingrese el segundo apellido" formControlName="segundoApellido"
        class="form-control">
      <span *ngIf="isValidField('segundoApellido')" class="form-text text-danger">
        {{getFieldOfGroupError("segundoApellido")}}
      </span>
    </div>
    <!-- CEDULA -->
    <div class="mb-3">
      <label class="form-label">Cedula</label>
      <input type="text" placeholder="Ingrese el primer apellido" formControlName="cedula" class="form-control">
      <span *ngIf="isValidField('cedula')" class="form-text text-danger">
        {{getFieldOfGroupError("cedula")}}
      </span>
    </div>

    <!-- PROVINCIAS -->
    <div class="mb-3">
      <select formControlName="codigoProvincia" class="form-select" aria-label="Default select example">
        <option selected value=0 class="text-center">-- Seleccione una Provincia --</option>
        <option *ngFor="let provincia of provincias" [value]=provincia.codigoProvincia>
          {{provincia.nombre}}
        </option>
      </select>
      <span *ngIf="isValidField('codigoProvincia')" class="form-text text-danger">
        {{getFieldOfGroupError("codigoProvincia")}}
      </span>
    </div>

    <!-- Cantones -->
    <div class="mb-3" *ngIf="cantones.length>0">
      <select formControlName="codigoCanton" class="form-select" aria-label="Default select example">
        <option selected value=0 class="text-center">-- Seleccione un canton --</option>
        <option *ngFor="let canton of cantones" [value]=canton.codigoCanton>
          {{canton.nombre}}
        </option>
      </select>
      <span *ngIf="isValidField('codigoCanton')" class="form-text text-danger">
        {{getFieldOfGroupError("codigoCanton")}}
      </span>
    </div>
    <!-- Distritos -->
    <div class="mb-3" *ngIf="distritos.length>0">
      <select formControlName="codigoDistrito" class="form-select" aria-label="Default select example">
        <option selected value=0 class="text-center">-- Seleccione un distrito --</option>
        <option *ngFor="let distrito of distritos" [value]=distrito.codigoDistrito>
          {{distrito.nombre}}
        </option>
      </select>
      <span *ngIf="isValidField('codigoDistrito')" class="form-text text-danger">
        {{getFieldOfGroupError("codigoDistrito")}}
      </span>
    </div>

    <!-- DIRECCION EXACTA -->

    <div class="mb-3">
      <label class="form-label">Direccion Exacta</label>
      <textarea type="text" placeholder="Ingrese la direccion exacta del cliente" formControlName="direccionExacta"
        class="form-control" rows="2" cols="50" style=" max-height: 200px;"></textarea>
      <span *ngIf="isValidField('direccionExacta')" class="form-text text-danger">
        {{getFieldOfGroupError("direccionExacta")}}
      </span>
    </div>


    <div class="row">
      <button type="submit" *ngIf="title!=='InformaciÃ³n'" (click)="onSubmit()"
        class="btn btn-primary text-center d-flex justify-content-center"> <img
          [src]="title ==='Agregar' ? 'assets/add.svg' : 'assets/edit.svg'" width="24px" height="24px"
          class="me-1">{{title}}</button>
    </div>
  </div>
</form>

<!-- <code>
    <pre>Formulario es valido: {{clientForm.valid| json }}</pre>
</code>
<code>
    <pre>Formulario Tipo Cambio: {{clientForm.value| json }}</pre>
</code>


<code>
    <pre>current Tipo Cambio: {{currentClient| json }}</pre>
</code> -->
